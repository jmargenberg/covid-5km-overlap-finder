(this["webpackJsonpcovid-5km-overlap"]=this["webpackJsonpcovid-5km-overlap"]||[]).push([[0],{138:function(e,n,t){},143:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(7),o=t.n(r),c=(t(75),t(8)),l=t(9),u=t(21),s=t(3),d=t(12),v=Object(d.cleanEnv)(Object({NODE_ENV:"production",PUBLIC_URL:"/covid-5km-overlap-finder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:"UA-177861037-1",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1Ijoiam1hcmdlbmJlcmciLCJhIjoiY2tmMHIyY2twMWc4NDJ2bWYwYjJ3dnV6NSJ9.40NfXdTrb1lMO0tqEZ76BQ",REACT_APP_ALGOLIA_PLACES_APP_ID:"pl0BG9XYHNCK",REACT_APP_ALGOLIA_PLACES_API_KEY:"582a61e561e3dc45433e868c22593a87",REACT_APP_RADIUS_KM_OPTIONS:"5,10,15,25",REACT_APP_RADIUS_KM_DEFAULT:"10"}),{REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:Object(d.str)({require:!0}),REACT_APP_MAPBOX_API_KEY:Object(d.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_APP_ID:Object(d.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_API_KEY:Object(d.str)({require:!0}),REACT_APP_RADIUS_KM_OPTIONS:Object(d.str)({require:!0,default:"5,10,15"}),REACT_APP_RADIUS_KM_DEFAULT:Object(d.num)({require:!0,default:5})});console.log({env:v,foo:"5,10,15,25"});var f=v,A=t(6),_=Object(u.b)({accessToken:f.REACT_APP_MAPBOX_API_KEY}),m=[[145.151596,-37.723742],[144.793065,-37.927951]],P={steps:1e3,units:"kilometers"},E={myExclusiveAreaLinePaint:{"line-color":"#5eb0c2","line-width":1},myExclusiveAreaFillPaint:{"fill-color":"#5eb0c2","fill-opacity":.25},theirExclusiveAreaLinePaint:{"line-color":"#52bf83","line-width":1},theirExclusiveAreaFillPaint:{"fill-color":"#52bf83","fill-opacity":.25},inaccessibleAreaFillPaint:{"fill-color":"black","fill-opacity":.25}},b=function(e){return e},O=function(e){var n=e.myLocation,t=e.theirLocation,r=e.radiusKm,o=void 0!==n&&void 0!==t,l=(void 0!==n||void 0!==t)&&!o,d=n&&s.circle(n,r,P),v=t&&s.circle(t,r,P),f=o?s.intersect(d,v):void 0,O=o?s.difference(d,v):d,p=o?s.difference(v,d):v,h=s.featureCollection([O,p,f].filter(b)),L=s.mask(h),g={};if(o||l){var S=s.bbox(h),y=Object(c.a)(S,4),C=y[0],T=y[1],x=y[2],I=y[3],j=o?s.lengthToDegrees(1,"kilometers"):s.lengthToDegrees(5,"kilometers");g={fitBounds:[[C-j,T-j],[x+j,I+j]]}}else g={fitBounds:m};return Object(a.useEffect)((function(){if(o)try{var e=null!==f,a=Math.abs(s.distance(n,t));A.a.event({category:"Location Overlaps",action:e?"Locations overlapped":"Locations didn't overlap",value:a})}catch(i){}}),[n,t,o,f]),i.a.createElement(_,Object.assign({style:"mapbox://styles/mapbox/streets-v11",containerStyle:{flex:1},movingMethod:"flyTo"},g),i.a.createElement(u.a,{data:s.featureCollection([O].filter(b)),linePaint:E.myExclusiveAreaLinePaint,fillPaint:E.myExclusiveAreaFillPaint}),i.a.createElement(u.a,{data:s.featureCollection([p].filter(b)),linePaint:E.theirExclusiveAreaLinePaint,fillPaint:E.theirExclusiveAreaFillPaint}),i.a.createElement(u.a,{data:L,fillPaint:E.inaccessibleAreaFillPaint}))},p=t(10),h=t(20),L=t.n(h),g=t(39),S=t(69),y=t(68),C=t(35),T=t.n(C),x=t(62),I=t.n(x);function j(){var e=Object(l.a)(["\n  margin: 5px;\n"]);return j=function(){return e},e}var w=T.a.initPlaces(f.REACT_APP_ALGOLIA_PLACES_APP_ID,f.REACT_APP_ALGOLIA_PLACES_API_KEY),R={hitsPerPage:5,language:"en",countries:["au"],aroundLatLng:"-37.816204,144.957489",aroundRadius:7e4},D=p.a.div(j()),K=I()((function(e){return new Promise((function(n,t){e?(A.a.event({category:"Debounced Algolia",action:"Search API Called"}),w.search(Object(S.a)({query:e},R),(function(e,a){if(e)return A.a.event({category:"Debounced Algolia",action:"Search API Error Received"}),t(e);n(a)}))):n([])}))}),1e3),k=function(e){return e},M=function(e){return[e.locale_names?e.locale_names[0]:void 0,(e.suburb?e.suburb[0]:void 0)||(e.city?e.city[0]:void 0),e.administrative?e.administrative[0]:void 0].filter(k).join(", ")},N=function(e){var n=e.onLocationSelected,t=e.placeholder,r=Object(a.useState)(""),o=Object(c.a)(r,2),l=o[0],u=o[1],s=function(){var e=Object(g.a)(L.a.mark((function e(n){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(n),e.next=3,K(n);case 3:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(t=a.hits)||void 0===t?void 0:t.map((function(e){return{value:e,label:M(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=Object(g.a)(L.a.mark((function e(t){var a,i,r,o;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||null==t){e.next=8;break}return r=t.value,o=[null===r||void 0===r||null===(a=r._geoloc)||void 0===a?void 0:a.lng,null===r||void 0===r||null===(i=r._geoloc)||void 0===i?void 0:i.lat],e.next=5,n(o);case 5:A.a.event({category:"Debounced Algolia",action:"Suggestion selected",value:null===l||void 0===l?void 0:l.length}),e.next=11;break;case 8:return e.next=10,n(void 0);case 10:A.a.event({category:"Debounced Algolia",action:"Suggestion cleared"});case 11:u("");case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(D,null,i.a.createElement(y.a,{defaultOptions:!0,placeholder:t,loadOptions:s,onChange:d,isClearable:!0,components:{IndicatorSeparator:null,DropdownIndicator:null}}))},G=t(148);t(138);function Y(){var e=Object(l.a)(["\n  font-size: 0.9em;\n  color: #6c757d;\n  margin: 0px 10px;\n"]);return Y=function(){return e},e}function U(){var e=Object(l.a)(["\n  margin: 5px;\n  text-align: right;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n"]);return U=function(){return e},e}function B(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  max-width: 500px;\n  margin: 5px;\n"]);return B=function(){return e},e}var F=p.a.div(B()),W=p.a.div(U()),q=p.a.div(Y()),J=function(e){var n=e.myLocationSelected,t=e.theirLocationSelected,r=e.radiusKm,o=e.onSelectRadiusKm,c=Object(a.useMemo)((function(){return f.REACT_APP_RADIUS_KM_OPTIONS.split(",").map(Number)}),[]),l=Object(a.useCallback)((function(e){o(c[e])}),[c,o]);return i.a.createElement(F,null,i.a.createElement(N,{onLocationSelected:n,placeholder:"Where do you live?"}),i.a.createElement(N,{onLocationSelected:t,placeholder:"Where do they live?"}),i.a.createElement(W,null,i.a.createElement(q,null,"Lockdown radius:"),i.a.createElement(G.a,null,i.a.createElement(G.a.Toggle,{id:"dropdown-basic",size:"sm",variant:"secondary"},r,"km"),i.a.createElement(G.a.Menu,{onSelect:l,className:"radius-dropdown"},c.map((function(e,n){return i.a.createElement(G.a.Item,{eventKey:n,onSelect:l,className:"radius-dropdown__item"},e,"km")}))))))},X=t(67),H=t(42);t(142);function z(){var e=Object(l.a)(["\n  flex-grow: 1;\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch;\n"]);return z=function(){return e},e}function V(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: center;\n"]);return V=function(){return e},e}function Q(){var e=Object(l.a)(["\n  height: 100vh;\n  position: absolute;\n  width: 100vw;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n"]);return Q=function(){return e},e}var Z=p.a.div(Q()),$=p.a.div(V()),ee=p.a.div(z());X.a.add(H.a,H.b),A.a.initialize(f.REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE),A.a.pageview(window.location.pathname+window.location.search);var ne=function(){var e=Object(a.useState)(void 0),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(void 0),l=Object(c.a)(o,2),u=l[0],s=l[1],d=Object(a.useState)(f.REACT_APP_RADIUS_KM_DEFAULT),v=Object(c.a)(d,2),_=v[0],m=v[1];return i.a.createElement(Z,null,i.a.createElement($,null,i.a.createElement(J,{myLocationSelected:function(e){r(e),e&&A.a.event({category:"Location Selections",action:"'My' location set"})},theirLocationSelected:function(e){s(e),e&&A.a.event({category:"Location Selections",action:"'Their' location set"})},radiusKm:_,onSelectRadiusKm:m})),i.a.createElement(ee,null,i.a.createElement(O,{myLocation:t,theirLocation:u,radiusKm:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,n,t){e.exports=t(143)},75:function(e,n,t){}},[[70,1,2]]]);
//# sourceMappingURL=main.2ff0fede.chunk.js.map