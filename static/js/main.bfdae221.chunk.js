(this["webpackJsonpcovid-5km-overlap"]=this["webpackJsonpcovid-5km-overlap"]||[]).push([[0],{149:function(e,n,t){},152:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(10),o=t.n(r),c=(t(84),t(8)),l=t(68),u=t(47),s=t(16),d=Object(s.cleanEnv)(Object({NODE_ENV:"production",PUBLIC_URL:"/covid-5km-overlap-finder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:"UA-177861037-1",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1Ijoiam1hcmdlbmJlcmciLCJhIjoiY2tmMHIyY2twMWc4NDJ2bWYwYjJ3dnV6NSJ9.40NfXdTrb1lMO0tqEZ76BQ",REACT_APP_ALGOLIA_PLACES_APP_ID:"pl0BG9XYHNCK",REACT_APP_ALGOLIA_PLACES_API_KEY:"582a61e561e3dc45433e868c22593a87",REACT_APP_RADIUS_KM_OPTIONS:"5,10,15,25",REACT_APP_RADIUS_KM_DEFAULT:"10"}),{REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:Object(s.str)({require:!0}),REACT_APP_MAPBOX_API_KEY:Object(s.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_APP_ID:Object(s.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_API_KEY:Object(s.str)({require:!0}),REACT_APP_RADIUS_KM_OPTIONS:Object(s.str)({require:!0,default:"5,10,15"}),REACT_APP_RADIUS_KM_DEFAULT:Object(s.num)({require:!0,default:5})}),v=(t(61),t(77)),f=t(2),A=t(13),m=t(11),_=t(26),P=t(5),E=Object(_.b)({accessToken:d.REACT_APP_MAPBOX_API_KEY}),b=[[145.151596,-37.723742],[144.793065,-37.927951]],O={steps:1e3,units:"kilometers"},p={myExclusiveAreaLinePaint:{"line-color":"#5eb0c2","line-width":1},myExclusiveAreaFillPaint:{"fill-color":"#5eb0c2","fill-opacity":.25},theirExclusiveAreaLinePaint:{"line-color":"#52bf83","line-width":1},theirExclusiveAreaFillPaint:{"fill-color":"#52bf83","fill-opacity":.25},inaccessibleAreaFillPaint:{"fill-color":"black","fill-opacity":.25}},h=function(e){return e},L=function(e){var n=e.myLocation,t=e.theirLocation,r=e.radiusKm,o=void 0!==n&&void 0!==t,l=(void 0!==n||void 0!==t)&&!o,u=n&&P.circle(n,r,O),s=t&&P.circle(t,r,O),d=o?P.intersect(u,s):void 0,v=o?P.difference(u,s):u,f=o?P.difference(s,u):s,m=P.featureCollection([v,f,d].filter(h)),L=P.mask(m),g={};if(o||l){var S=P.bbox(m),C=Object(A.a)(S,4),y=C[0],T=C[1],j=C[2],I=C[3],x=o?P.lengthToDegrees(1,"kilometers"):P.lengthToDegrees(5,"kilometers");g={fitBounds:[[y-x,T-x],[j+x,I+x]]}}else g={fitBounds:b};return Object(a.useEffect)((function(){if(o)try{var e=null!==d,a=Math.abs(P.distance(n,t));c.a.event({category:"Location Overlaps",action:e?"Locations overlapped":"Locations didn't overlap",value:a})}catch(i){}}),[n,t,o,d]),i.a.createElement(E,Object.assign({style:"mapbox://styles/mapbox/streets-v11",containerStyle:{flex:1},movingMethod:"flyTo"},g),i.a.createElement(_.a,{data:P.featureCollection([v].filter(h)),linePaint:p.myExclusiveAreaLinePaint,fillPaint:p.myExclusiveAreaFillPaint}),i.a.createElement(_.a,{data:P.featureCollection([f].filter(h)),linePaint:p.theirExclusiveAreaLinePaint,fillPaint:p.theirExclusiveAreaFillPaint}),i.a.createElement(_.a,{data:L,fillPaint:p.inaccessibleAreaFillPaint}))},g=t(12),S=t(25),C=t.n(S),y=t(44),T=t(78),j=t(76),I=t(40),x=t.n(I),w=t(70),R=t.n(w);function D(){var e=Object(m.a)(["\n  margin: 5px;\n"]);return D=function(){return e},e}var K=x.a.initPlaces(d.REACT_APP_ALGOLIA_PLACES_APP_ID,d.REACT_APP_ALGOLIA_PLACES_API_KEY),k={hitsPerPage:5,language:"en",countries:["au"],aroundLatLng:"-37.816204,144.957489",aroundRadius:7e4},N=g.a.div(D()),M=R()((function(e){return new Promise((function(n,t){e?(c.a.event({category:"Debounced Algolia",action:"Search API Called"}),K.search(Object(T.a)({query:e},k),(function(e,a){if(e)return c.a.event({category:"Debounced Algolia",action:"Search API Error Received"}),t(e);n(a)}))):n([])}))}),1e3),G=function(e){return e},U=function(e){return[e.locale_names?e.locale_names[0]:void 0,(e.suburb?e.suburb[0]:void 0)||(e.city?e.city[0]:void 0),e.administrative?e.administrative[0]:void 0].filter(G).join(", ")},Y=function(e){var n=e.onLocationSelected,t=e.placeholder,r=Object(a.useState)(""),o=Object(A.a)(r,2),l=o[0],u=o[1],s=function(){var e=Object(y.a)(C.a.mark((function e(n){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(n),e.next=3,M(n);case 3:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(t=a.hits)||void 0===t?void 0:t.map((function(e){return{value:e,label:U(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=Object(y.a)(C.a.mark((function e(t){var a,i,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||null==t){e.next=8;break}return r=t.value,o=[null===r||void 0===r||null===(a=r._geoloc)||void 0===a?void 0:a.lng,null===r||void 0===r||null===(i=r._geoloc)||void 0===i?void 0:i.lat],e.next=5,n(o);case 5:c.a.event({category:"Debounced Algolia",action:"Suggestion selected",value:null===l||void 0===l?void 0:l.length}),e.next=11;break;case 8:return e.next=10,n(void 0);case 10:c.a.event({category:"Debounced Algolia",action:"Suggestion cleared"});case 11:u("");case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(N,null,i.a.createElement(j.a,{defaultOptions:!0,placeholder:t,loadOptions:s,onChange:d,isClearable:!0,components:{IndicatorSeparator:null,DropdownIndicator:null}}))},B=t(157);t(149);function F(){var e=Object(m.a)(["\n  font-size: 0.9em;\n  color: #6c757d;\n  margin: 0px 10px;\n"]);return F=function(){return e},e}function W(){var e=Object(m.a)(["\n  margin: 5px;\n  text-align: right;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n"]);return W=function(){return e},e}function q(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  max-width: 500px;\n  margin: 5px;\n"]);return q=function(){return e},e}var J=g.a.div(q()),X=g.a.div(W()),H=g.a.div(F()),z=function(e){var n=e.myLocationSelected,t=e.theirLocationSelected,r=e.radiusKm,o=e.onSelectRadiusKm,c=Object(a.useMemo)((function(){return d.REACT_APP_RADIUS_KM_OPTIONS.split(",").map(Number)}),[]),l=Object(a.useCallback)((function(e){o(c[e])}),[c,o]);return i.a.createElement(J,null,i.a.createElement(Y,{onLocationSelected:n,placeholder:"Where do you live?"}),i.a.createElement(Y,{onLocationSelected:t,placeholder:"Where do they live?"}),i.a.createElement(X,null,i.a.createElement(H,null,"Lockdown radius:"),i.a.createElement(B.a,null,i.a.createElement(B.a.Toggle,{id:"dropdown-basic",size:"sm",variant:"secondary"},r,"km"),i.a.createElement(B.a.Menu,{onSelect:l,className:"radius-dropdown"},c.map((function(e,n){return i.a.createElement(B.a.Item,{eventKey:n,onSelect:l,className:"radius-dropdown__item"},e,"km")}))))))};function V(){var e=Object(m.a)(["\n  flex-grow: 1;\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch;\n"]);return V=function(){return e},e}function Q(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: center;\n"]);return Q=function(){return e},e}function Z(){var e=Object(m.a)(["\n  height: 100vh;\n  position: absolute;\n  width: 100vw;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n"]);return Z=function(){return e},e}var $=g.a.div(Z()),ee=g.a.div(Q()),ne=g.a.div(V());var te=function(){var e=Object(a.useState)(void 0),n=Object(A.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(void 0),l=Object(A.a)(o,2),u=l[0],s=l[1],v=Object(f.g)(),m=Object(f.f)(),_=Object(a.useMemo)((function(){var e=new URLSearchParams(v.search).get("radius");return e&&!isNaN(e)?Number(e):d.REACT_APP_RADIUS_KM_DEFAULT}),[v.search]),P=Object(a.useCallback)((function(e){e!==d.REACT_APP_RADIUS_KM_DEFAULT?m.push("/?".concat("radius","=").concat(e)):m.push("/")}),[m]);return i.a.createElement($,null,i.a.createElement(ee,null,i.a.createElement(z,{myLocationSelected:function(e){r(e),e&&c.a.event({category:"Location Selections",action:"'My' location set"})},theirLocationSelected:function(e){s(e),e&&c.a.event({category:"Location Selections",action:"'Their' location set"})},radiusKm:_,onSelectRadiusKm:P})),i.a.createElement(ne,null,i.a.createElement(L,{myLocation:t,theirLocation:u,radiusKm:_})))};l.a.add(u.a,u.b),c.a.initialize(d.REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE),c.a.pageview(window.location.pathname+window.location.search);var ae=function(){return i.a.createElement(v.a,{basename:"/covid-5km-overlap-finder"},i.a.createElement(f.c,null,i.a.createElement(f.a,{path:"/"},i.a.createElement(te,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},79:function(e,n,t){e.exports=t(152)},84:function(e,n,t){}},[[79,1,2]]]);
//# sourceMappingURL=main.bfdae221.chunk.js.map