(this["webpackJsonpcovid-5km-overlap"]=this["webpackJsonpcovid-5km-overlap"]||[]).push([[0],{142:function(e,n,t){},143:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),r=t(11),o=t.n(r),c=(t(69),t(8)),l=t(3),u=t(22),s=t(5),d=t(18),f=Object(d.cleanEnv)(Object({NODE_ENV:"production",PUBLIC_URL:"/covid-5km-overlap-finder",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:"UA-177861037-1",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1Ijoiam1hcmdlbmJlcmciLCJhIjoiY2tmMHIyY2twMWc4NDJ2bWYwYjJ3dnV6NSJ9.40NfXdTrb1lMO0tqEZ76BQ",REACT_APP_ALGOLIA_PLACES_APP_ID:"pl0BG9XYHNCK",REACT_APP_ALGOLIA_PLACES_API_KEY:"582a61e561e3dc45433e868c22593a87"}),{REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE:Object(d.str)({require:!0}),REACT_APP_MAPBOX_API_KEY:Object(d.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_APP_ID:Object(d.str)({require:!0}),REACT_APP_ALGOLIA_PLACES_API_KEY:Object(d.str)({require:!0})}),v=t(7),m=Object(u.b)({accessToken:f.REACT_APP_MAPBOX_API_KEY}),A=[[145.151596,-37.723742],[144.793065,-37.927951]],p={steps:1e3,units:"kilometers"},b={myExclusiveAreaLinePaint:{"line-color":"#5eb0c2","line-width":1},myExclusiveAreaFillPaint:{"fill-color":"#5eb0c2","fill-opacity":.25},theirExclusiveAreaLinePaint:{"line-color":"#52bf83","line-width":1},theirExclusiveAreaFillPaint:{"fill-color":"#52bf83","fill-opacity":.25},inaccessibleAreaFillPaint:{"fill-color":"black","fill-opacity":.25}},P=function(e){return e},_=function(e){var n=e.myLocation,t=e.theirLocation,r=void 0!==n&&void 0!==t,o=(void 0!==n||void 0!==t)&&!r,l=n&&s.circle(n,5,p),d=t&&s.circle(t,5,p),f=r?s.intersect(l,d):void 0,_=r?s.difference(l,d):l,g=r?s.difference(d,l):d,E=s.featureCollection([_,g,f].filter(P)),h=s.mask(E),x={};if(r||o){var O=s.bbox(E),L=Object(c.a)(O,4),y=L[0],C=L[1],j=L[2],S=L[3],w=r?s.lengthToDegrees(1,"kilometers"):s.lengthToDegrees(5,"kilometers");x={fitBounds:[[y-w,C-w],[j+w,S+w]]}}else x={fitBounds:A};return Object(i.useEffect)((function(){if(r)try{var e=null!==f,i=Math.abs(s.distance(n,t));v.a.event({category:"Location Overlaps",action:e?"Locations overlapped":"Locations didn't overlap",value:i})}catch(a){}}),[n,t]),a.a.createElement(m,Object.assign({style:"mapbox://styles/mapbox/streets-v11",containerStyle:{flex:1},movingMethod:"flyTo"},x),a.a.createElement(u.a,{data:s.featureCollection([_].filter(P)),linePaint:b.myExclusiveAreaLinePaint,fillPaint:b.myExclusiveAreaFillPaint}),a.a.createElement(u.a,{data:s.featureCollection([g].filter(P)),linePaint:b.theirExclusiveAreaLinePaint,fillPaint:b.theirExclusiveAreaFillPaint}),a.a.createElement(u.a,{data:h,fillPaint:b.inaccessibleAreaFillPaint}))},g=t(4),E=t(21),h=t.n(E),x=t(37),O=t(63),L=t(62),y=t(34),C=t.n(y),j=t(58),S=t.n(j);function w(){var e=Object(l.a)(["\n  margin: 5px;\n"]);return w=function(){return e},e}var I=C.a.initPlaces(f.REACT_APP_ALGOLIA_PLACES_APP_ID,f.REACT_APP_ALGOLIA_PLACES_API_KEY),T={hitsPerPage:5,language:"en",countries:["au"],aroundLatLng:"-37.816204,144.957489",aroundRadius:7e4},k=g.a.div(w()),R=S()((function(e){return new Promise((function(n,t){e?(v.a.event({category:"Debounced Algolia",action:"Search API Called"}),I.search(Object(O.a)({query:e},T),(function(e,i){if(e)return v.a.event({category:"Debounced Algolia",action:"Search API Error Received"}),t(e);n(i)}))):n([])}))}),1e3),D=function(e){return e},G=function(e){return[e.locale_names?e.locale_names[0]:void 0,(e.suburb?e.suburb[0]:void 0)||(e.city?e.city[0]:void 0),e.administrative?e.administrative[0]:void 0].filter(D).join(", ")},Y=function(e){var n=e.onLocationSelected,t=e.placeholder,r=Object(i.useState)(""),o=Object(c.a)(r,2),l=o[0],u=o[1],s=function(){var e=Object(x.a)(h.a.mark((function e(n){var t,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(n),e.next=3,R(n);case 3:return i=e.sent,e.abrupt("return",null===i||void 0===i||null===(t=i.hits)||void 0===t?void 0:t.map((function(e){return{value:e,label:G(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(h.a.mark((function e(t){var i,a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||null==t){e.next=8;break}return r=t.value,o=[null===r||void 0===r||null===(i=r._geoloc)||void 0===i?void 0:i.lng,null===r||void 0===r||null===(a=r._geoloc)||void 0===a?void 0:a.lat],e.next=5,n(o);case 5:v.a.event({category:"Debounced Algolia",action:"Suggestion selected",value:null===l||void 0===l?void 0:l.length}),e.next=11;break;case 8:return e.next=10,n(void 0);case 10:v.a.event({category:"Debounced Algolia",action:"Suggestion cleared"});case 11:u("");case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement(k,null,a.a.createElement(L.a,{defaultOptions:!0,placeholder:t,loadOptions:s,onChange:d,isClearable:!0,components:{IndicatorSeparator:null,DropdownIndicator:null}}))};function K(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  max-width: 500px;\n  margin: 5px;\n"]);return K=function(){return e},e}var N=g.a.div(K()),B=function(e){var n=e.myLocationSelected,t=e.theirLocationSelected;return a.a.createElement(N,null,a.a.createElement(Y,{onLocationSelected:n,placeholder:"Where do you live?"}),a.a.createElement(Y,{onLocationSelected:t,placeholder:"Where do they live?"}))},M=(t(61),t(17));t(142);function W(){var e=Object(l.a)(["\n  color: #222;\n"]);return W=function(){return e},e}function J(){var e=Object(l.a)(["\n  text-align: center;\n  font-size: 0.9em;\n\n  margin-top: 5px;\n  margin-bottom: 5px;\n  color: #333333;\n"]);return J=function(){return e},e}function q(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n\n  margin-left: 40px;\n  margin-right: 40px;\n"]);return q=function(){return e},e}function F(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n\n  margin-left: 15px;\n"]);return F=function(){return e},e}function X(){var e=Object(l.a)(["\n  flex-grow: 2;\n  color: #333333;\n  text-align: center;\n\n  margin-top: 10px;\n  margin-bottom: 10px;\n  margin-left: 0px;\n  margin-right: 15px;\n"]);return X=function(){return e},e}function H(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n\n  margin-top: 5px;\n  margin-bottom: 5px;\n  margin-left: 20px;\n  margin-right: 20px;\n"]);return H=function(){return e},e}function U(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  max-width: 500px;\n  background-color: orange;\n"]);return U=function(){return e},e}g.a.div(U()),g.a.div(H()),g.a.h4(X()),g.a.div(F()),g.a.div(q()),g.a.p(J()),g.a.a(W());var z=t(12);function V(){var e=Object(l.a)(["\n  flex-grow: 1;\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch;\n"]);return V=function(){return e},e}function Q(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: center;\n"]);return Q=function(){return e},e}function Z(){var e=Object(l.a)(["\n  height: 100vh;\n  position: absolute;\n  width: 100vw;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n"]);return Z=function(){return e},e}var $=g.a.div(Z()),ee=g.a.div(Q()),ne=g.a.div(V());z.b.add(M.a,M.b),v.a.initialize(f.REACT_APP_GOOGLE_ANALYTICS_TRACKING_CODE),v.a.pageview(window.location.pathname+window.location.search);var te=function(){var e=Object(i.useState)(void 0),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(i.useState)(void 0),l=Object(c.a)(o,2),u=l[0],s=l[1];return a.a.createElement($,null,a.a.createElement(ee,null,a.a.createElement(B,{myLocationSelected:function(e){r(e),e&&v.a.event({category:"Location Selections",action:"'My' location set"})},theirLocationSelected:function(e){s(e),e&&v.a.event({category:"Location Selections",action:"'Their' location set"})}})),a.a.createElement(ne,null,a.a.createElement(_,{myLocation:t,theirLocation:u})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,n,t){e.exports=t(143)},69:function(e,n,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.54a0f7f5.chunk.js.map